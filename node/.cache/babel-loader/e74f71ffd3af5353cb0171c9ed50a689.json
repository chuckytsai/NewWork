{"ast":null,"code":"var _jsxFileName = \"D:\\\\JsMff\\\\src\\\\components\\\\ReactElement\\\\EditRestaurant.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useRef, useEffect } from \"react\";\nimport { Button, Modal } from \"react-bootstrap\";\nimport \"../../styles/ReactElement/EditRestaurant.scss\";\nimport SwitchButton from \"../ReactElement/SwitchButton\";\nimport Swal from \"sweetalert2\";\nimport { imgUploadApi } from \"../../middleware/api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction EditRestaurant({\n  buttonTitle,\n  buttonClassName,\n  modalTitle,\n  enterColor,\n  closeColor,\n  removeColor // setRoomProperty,\n  // roomProperty,\n\n}) {\n  _s();\n\n  const inputRef = useRef();\n  const fileRef = useRef(); // useEffect(() => {\n  //   console.log(roomProperty);\n  // }, roomProperty);\n  // const [companyData, setCompanyDatas] = useState(null);\n\n  const [show, setShow] = useState(false);\n\n  const handleClose = () => setShow(false);\n\n  const handleShow = () => setShow(true); //店家資料\n  // const [roomProperty, setRoomProperty] = useState([\n  //   { id: \"1\", cname: \"日式\", state: \"1\" },\n  //   { id: \"2\", cname: \"韓式\", state: \"1\" },\n  //   { id: \"3\", cname: \"燒烤\", state: \"1\" },\n  //   { id: \"4\", cname: \"火鍋\", state: \"1\" },\n  //   { id: \"5\", cname: \"美式\", state: \"1\" },\n  // ]);\n  //10/26由這開始\n  //建立空的清單...從localstorage去取得 並儲存到roomProperty\n\n\n  const [roomProperty, setRoomProperty] = useState([]);\n  const [rpError, setRpError] = useState({\n    error: \"\",\n    fileError: \"\"\n  });\n\n  const getLocalStorageData = () => {\n    let local = JSON.parse(localStorage.getItem(\"roomProperty\")) || [];\n    setRoomProperty(local);\n  };\n\n  useEffect(() => {\n    getLocalStorageData();\n  }, []); //將餐廳屬性傳送到localstorage\n\n  const clickHandler = e => {\n    const newError = {};\n\n    if (inputRef.current.value === \"\" || fileRef.current.files.length <= 0) {\n      if (inputRef.current.value === \"\") {\n        // newError.error = \"請輸入分類名稱\";\n        // setRpError({ ...newError, });\n        // console.log(rpError, newError);\n        newError.error = \"請輸入分類名稱\";\n      }\n\n      if (fileRef.current.files.length <= 0) {\n        newError.fileError = \"請上傳圖片\";\n      }\n\n      setRpError(newError);\n      return;\n    }\n\n    setRpError({\n      error: \"\",\n      fileError: \"\"\n    });\n    let listArr;\n    let inputData = inputRef.current.value;\n    let id = roomProperty.length + 1;\n    let newState = true;\n    let newData = {\n      id: id,\n      cname: inputData,\n      state: newState\n    };\n    let getLocalStorage = localStorage.getItem(\"roomProperty\");\n\n    if (getLocalStorage === null) {\n      listArr = [];\n    } else {\n      listArr = JSON.parse(getLocalStorage);\n    }\n\n    listArr.push(newData);\n    localStorage.setItem(\"roomProperty\", JSON.stringify(listArr));\n    inputRef.current.value = \"\";\n    setTimeout(() => {\n      getLocalStorageData();\n    }, 300);\n  }; //刪除單筆餐廳屬性\n\n\n  const deleteHandler = index => {\n    Swal.fire({\n      title: \"確認刪除資料?\",\n      text: \"請確認是否刪除，刪除後無法回復\",\n      icon: \"warning\",\n      showCancelButton: true,\n      confirmButtonColor: \"#3085d6\",\n      cancelButtonColor: \"#d33\",\n      confirmButtonText: \"確定\",\n      cancelButtonText: \"取消\"\n    }).then(result => {\n      if (result.isConfirmed) {\n        let deleteValue = index.target.value;\n        let listArr = [];\n        let getLocalStorage = localStorage.getItem(\"roomProperty\");\n        listArr = JSON.parse(getLocalStorage);\n        const newArr = listArr.filter(item => item.id !== +deleteValue);\n        localStorage.setItem(\"roomProperty\", JSON.stringify(newArr));\n        setTimeout(() => {\n          getLocalStorageData();\n        }, 300);\n        Swal.fire(\"刪除成功!\", \"資料刪除成功\", \"success\");\n      }\n    });\n  };\n\n  const handleChange = e => {\n    Array.from(e.target.files).forEach(i => {\n      let formData = new FormData();\n      formData.append(\"file\", i);\n      formData.append(\"folder\", \"attributes\");\n      imgUploadApi(formData).then(res => {\n        console.log(res); // setImgurl(res.data.data.file_url);\n      });\n    });\n    console.log(e.target.files);\n  }; //控制狀態\n  // const stateHandler = () => {};\n\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Button, {\n      variant: buttonClassName,\n      onClick: handleShow,\n      children: buttonTitle\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      show: show,\n      onHide: handleClose,\n      backdrop: \"static\",\n      keyboard: false,\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: /*#__PURE__*/_jsxDEV(\"h4\", {\n            style: {\n              fontWeight: \"bold\"\n            },\n            children: modalTitle\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"editRestaurantTitle\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"\\u5EFA\\u7ACB\\u5206\\u985E\\u540D\\u7A31\", /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                color: \"red\"\n              },\n              children: \"*\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"editRestaurantTitleCreat\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex flex-column\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: \"\\u8ACB\\u8F38\\u5165\\u5206\\u985E\\u540D\\u7A31\",\n                ref: inputRef,\n                style: {\n                  borderColor: rpError.error ? \"#F85756\" : \"\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 151,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  color: \"red\",\n                  fontSize: \"12px\"\n                },\n                children: rpError.error\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 157,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"editRestaurantTitle\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\u4E0A\\u50B3\\u5716\\u7247\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"editRestaurantTitleCreat\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex flex-column\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                ref: fileRef,\n                type: \"file\",\n                accept: \"image/png, image/jpeg\",\n                placeholder: \"\\u8ACB\\u8F38\\u5165\\u5206\\u985E\\u540D\\u7A31\",\n                onChange: handleChange,\n                style: {\n                  borderColor: rpError.fileError ? \"#F85756\" : \"\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 167,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"componentsSpan\",\n                children: \"\\u5EFA\\u8B70\\u5C3A\\u5BF8150*150 / \\u6A94\\u6848\\u683C\\u5F0F:jpg.png\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 175,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  color: \"red\",\n                  fontSize: \"12px\"\n                },\n                children: rpError.fileError\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 178,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-success text-white\",\n          onClick: e => {\n            clickHandler(e);\n          },\n          children: \"\\u5EFA\\u7ACB\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"editRestaurantBody mt-4\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"table table-bordered \",\n            children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n                style: {\n                  backgroundColor: \"#e6ebef\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"col\",\n                  children: \"\\u6392\\u5E8F\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 196,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"col\",\n                  children: \"\\u5206\\u985E\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 197,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"col\",\n                  children: \"\\u5716\\u7247\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 198,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"col\",\n                  children: \"\\u72C0\\u614B\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 199,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"col\",\n                  children: \"\\u64CD\\u4F5C\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 200,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 17\n              }, this), roomProperty && roomProperty.map((item, i) => {\n                return /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    scope: \"row\",\n                    children: i + 1\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 206,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: item.cname\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 207,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        width: \"150px\",\n                        height: \"150px\"\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 209,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 208,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: /*#__PURE__*/_jsxDEV(SwitchButton // companyData={roomProperty}\n                    , {\n                      companyData: item.state,\n                      setCompanyData: setRoomProperty\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 214,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 213,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"btn btn-danger text-white\",\n                      value: item.id,\n                      onClick: e => {\n                        deleteHandler(e);\n                      },\n                      children: \"\\u522A\\u9664\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 221,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 220,\n                    columnNumber: 25\n                  }, this)]\n                }, item.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 205,\n                  columnNumber: 23\n                }, this);\n              })]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: removeColor,\n          onClick: handleClose,\n          children: \"\\u8FD4\\u56DE\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: enterColor,\n          onClick: () => {\n            Swal.fire(\"資料建立完成\");\n          },\n          children: \"\\u78BA\\u8A8D\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(EditRestaurant, \"CvNF0YuY4vZa0pl951gfIx6XDbE=\");\n\n_c = EditRestaurant;\nexport default EditRestaurant;\n\nvar _c;\n\n$RefreshReg$(_c, \"EditRestaurant\");","map":{"version":3,"sources":["D:/JsMff/src/components/ReactElement/EditRestaurant.js"],"names":["React","useState","useRef","useEffect","Button","Modal","SwitchButton","Swal","imgUploadApi","EditRestaurant","buttonTitle","buttonClassName","modalTitle","enterColor","closeColor","removeColor","inputRef","fileRef","show","setShow","handleClose","handleShow","roomProperty","setRoomProperty","rpError","setRpError","error","fileError","getLocalStorageData","local","JSON","parse","localStorage","getItem","clickHandler","e","newError","current","value","files","length","listArr","inputData","id","newState","newData","cname","state","getLocalStorage","push","setItem","stringify","setTimeout","deleteHandler","index","fire","title","text","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","cancelButtonText","then","result","isConfirmed","deleteValue","target","newArr","filter","item","handleChange","Array","from","forEach","i","formData","FormData","append","res","console","log","fontWeight","color","borderColor","fontSize","backgroundColor","map","width","height"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\r\nimport { Button, Modal } from \"react-bootstrap\";\r\nimport \"../../styles/ReactElement/EditRestaurant.scss\";\r\nimport SwitchButton from \"../ReactElement/SwitchButton\";\r\nimport Swal from \"sweetalert2\";\r\nimport { imgUploadApi } from \"../../middleware/api\";\r\nfunction EditRestaurant({\r\n  buttonTitle,\r\n  buttonClassName,\r\n  modalTitle,\r\n  enterColor,\r\n  closeColor,\r\n  removeColor,\r\n  // setRoomProperty,\r\n  // roomProperty,\r\n}) {\r\n  const inputRef = useRef();\r\n  const fileRef = useRef();\r\n\r\n  // useEffect(() => {\r\n  //   console.log(roomProperty);\r\n  // }, roomProperty);\r\n  // const [companyData, setCompanyDatas] = useState(null);\r\n  const [show, setShow] = useState(false);\r\n  const handleClose = () => setShow(false);\r\n  const handleShow = () => setShow(true);\r\n  //店家資料\r\n  // const [roomProperty, setRoomProperty] = useState([\r\n  //   { id: \"1\", cname: \"日式\", state: \"1\" },\r\n  //   { id: \"2\", cname: \"韓式\", state: \"1\" },\r\n  //   { id: \"3\", cname: \"燒烤\", state: \"1\" },\r\n  //   { id: \"4\", cname: \"火鍋\", state: \"1\" },\r\n  //   { id: \"5\", cname: \"美式\", state: \"1\" },\r\n  // ]);\r\n\r\n  //10/26由這開始\r\n  //建立空的清單...從localstorage去取得 並儲存到roomProperty\r\n  const [roomProperty, setRoomProperty] = useState([]);\r\n  const [rpError, setRpError] = useState({\r\n    error: \"\",\r\n    fileError: \"\",\r\n  });\r\n  const getLocalStorageData = () => {\r\n    let local = JSON.parse(localStorage.getItem(\"roomProperty\")) || [];\r\n    setRoomProperty(local);\r\n  };\r\n  useEffect(() => {\r\n    getLocalStorageData();\r\n  }, []);\r\n  //將餐廳屬性傳送到localstorage\r\n  const clickHandler = (e) => {\r\n    const newError = {};\r\n    if (inputRef.current.value === \"\" || fileRef.current.files.length <= 0) {\r\n      if (inputRef.current.value === \"\") {\r\n        // newError.error = \"請輸入分類名稱\";\r\n        // setRpError({ ...newError, });\r\n        // console.log(rpError, newError);\r\n        newError.error = \"請輸入分類名稱\";\r\n      }\r\n      if (fileRef.current.files.length <= 0) {\r\n        newError.fileError = \"請上傳圖片\";\r\n      }\r\n      setRpError(newError);\r\n      return;\r\n    }\r\n    setRpError({ error: \"\", fileError: \"\" });\r\n    let listArr;\r\n    let inputData = inputRef.current.value;\r\n    let id = roomProperty.length + 1;\r\n    let newState = true;\r\n    let newData = { id: id, cname: inputData, state: newState };\r\n    let getLocalStorage = localStorage.getItem(\"roomProperty\");\r\n    if (getLocalStorage === null) {\r\n      listArr = [];\r\n    } else {\r\n      listArr = JSON.parse(getLocalStorage);\r\n    }\r\n    listArr.push(newData);\r\n    localStorage.setItem(\"roomProperty\", JSON.stringify(listArr));\r\n    inputRef.current.value = \"\";\r\n    setTimeout(() => {\r\n      getLocalStorageData();\r\n    }, 300);\r\n  };\r\n  //刪除單筆餐廳屬性\r\n  const deleteHandler = (index) => {\r\n    Swal.fire({\r\n      title: \"確認刪除資料?\",\r\n      text: \"請確認是否刪除，刪除後無法回復\",\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#3085d6\",\r\n      cancelButtonColor: \"#d33\",\r\n      confirmButtonText: \"確定\",\r\n      cancelButtonText: \"取消\",\r\n    }).then((result) => {\r\n      if (result.isConfirmed) {\r\n        let deleteValue = index.target.value;\r\n        let listArr = [];\r\n        let getLocalStorage = localStorage.getItem(\"roomProperty\");\r\n        listArr = JSON.parse(getLocalStorage);\r\n        const newArr = listArr.filter((item) => item.id !== +deleteValue);\r\n        localStorage.setItem(\"roomProperty\", JSON.stringify(newArr));\r\n        setTimeout(() => {\r\n          getLocalStorageData();\r\n        }, 300);\r\n        Swal.fire(\"刪除成功!\", \"資料刪除成功\", \"success\");\r\n      }\r\n    });\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    Array.from(e.target.files).forEach((i) => {\r\n      let formData = new FormData();\r\n      formData.append(\"file\", i);\r\n      formData.append(\"folder\", \"attributes\");\r\n      imgUploadApi(formData).then((res) => {\r\n        console.log(res);\r\n        // setImgurl(res.data.data.file_url);\r\n      });\r\n    });\r\n    console.log(e.target.files);\r\n  };\r\n  //控制狀態\r\n  // const stateHandler = () => {};\r\n\r\n  return (\r\n    <>\r\n      <Button variant={buttonClassName} onClick={handleShow}>\r\n        {buttonTitle}\r\n      </Button>\r\n\r\n      <Modal\r\n        show={show}\r\n        onHide={handleClose}\r\n        backdrop=\"static\"\r\n        keyboard={false}\r\n      >\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>\r\n            <h4 style={{ fontWeight: \"bold\" }}>{modalTitle}</h4>\r\n          </Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <div className=\"editRestaurantTitle\">\r\n            <p>\r\n              建立分類名稱<span style={{ color: \"red\" }}>*</span>\r\n            </p>\r\n            <div className=\"editRestaurantTitleCreat\">\r\n              <div className=\"d-flex flex-column\">\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"請輸入分類名稱\"\r\n                  ref={inputRef}\r\n                  style={{ borderColor: rpError.error ? \"#F85756\" : \"\" }}\r\n                />\r\n                <span style={{ color: \"red\", fontSize: \"12px\" }}>\r\n                  {rpError.error}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"editRestaurantTitle\">\r\n            <p>上傳圖片</p>\r\n            <div className=\"editRestaurantTitleCreat\">\r\n              <div className=\"d-flex flex-column\">\r\n                <input\r\n                  ref={fileRef}\r\n                  type=\"file\"\r\n                  accept=\"image/png, image/jpeg\"\r\n                  placeholder=\"請輸入分類名稱\"\r\n                  onChange={handleChange}\r\n                  style={{ borderColor: rpError.fileError ? \"#F85756\" : \"\" }}\r\n                />\r\n                <span className=\"componentsSpan\">\r\n                  建議尺寸150*150 / 檔案格式:jpg.png\r\n                </span>\r\n                <span style={{ color: \"red\", fontSize: \"12px\" }}>\r\n                  {rpError.fileError}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <button\r\n            className=\"btn btn-success text-white\"\r\n            onClick={(e) => {\r\n              clickHandler(e);\r\n            }}\r\n          >\r\n            建立\r\n          </button>\r\n          <div className=\"editRestaurantBody mt-4\">\r\n            <table className=\"table table-bordered \">\r\n              <tbody>\r\n                <tr style={{ backgroundColor: \"#e6ebef\" }}>\r\n                  <th scope=\"col\">排序</th>\r\n                  <th scope=\"col\">分類</th>\r\n                  <th scope=\"col\">圖片</th>\r\n                  <th scope=\"col\">狀態</th>\r\n                  <th scope=\"col\">操作</th>\r\n                </tr>\r\n                {roomProperty &&\r\n                  roomProperty.map((item, i) => {\r\n                    return (\r\n                      <tr key={item.id}>\r\n                        <th scope=\"row\">{i + 1}</th>\r\n                        <td>{item.cname}</td>\r\n                        <td>\r\n                          <div\r\n                            style={{ width: \"150px\", height: \"150px\" }}\r\n                          ></div>\r\n                        </td>\r\n                        <td>\r\n                          <SwitchButton\r\n                            // companyData={roomProperty}\r\n                            companyData={item.state}\r\n                            setCompanyData={setRoomProperty}\r\n                          />\r\n                        </td>\r\n                        <td>\r\n                          <button\r\n                            className=\"btn btn-danger text-white\"\r\n                            value={item.id}\r\n                            onClick={(e) => {\r\n                              deleteHandler(e);\r\n                            }}\r\n                          >\r\n                            刪除\r\n                          </button>\r\n                        </td>\r\n                      </tr>\r\n                    );\r\n                  })}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant={removeColor} onClick={handleClose}>\r\n            返回\r\n          </Button>\r\n          <Button\r\n            variant={enterColor}\r\n            onClick={() => {\r\n              Swal.fire(\"資料建立完成\");\r\n            }}\r\n          >\r\n            確認\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default EditRestaurant;\r\n"]},"metadata":{},"sourceType":"module"}