{"ast":null,"code":"import Swal from \"sweetalert2\";\nimport { ImInside, ImOut } from \"./LoginEffect\";\nimport { RemoveUser, RemoveLabel } from \"../../components/ReactElement/RemoveLocalStorage\"; // ======================超過24小時則刪除==========================\n\n(function OneDayOut() {\n  let Today = new Date();\n  let TodayValue = parseInt(String(Today.getFullYear()) + String(Today.getMonth()) + String(Today.getDate()) + String(Today.getHours()));\n  let OnceUponATime = parseInt(localStorage.TKTime);\n\n  if (TodayValue - OnceUponATime >= 100) {\n    RemoveUser();\n    RemoveLabel();\n  }\n})(); // ==================超過30分鐘滑鼠沒動就要刪除Token==================\n\n\nfunction NoMouseMove() {\n  if (localStorage.StayHere === localStorage.StayHere) {\n    RemoveUser();\n    RemoveLabel();\n  }\n\n  setTimeout(NoMouseMove, 1800000);\n}\n\n_c = NoMouseMove;\nsetTimeout(NoMouseMove, 1800000); // 滑鼠移動記錄\n\nwindow.addEventListener('mousemove', event => {\n  let Today = new Date();\n  setTimeout(() => {\n    localStorage.setItem(\"StayHere\", `${event.pageX},${event.pageY}`);\n    localStorage.setItem(\"TKTime\", String(Today.getFullYear()) + String(Today.getMonth()) + String(Today.getDate()) + String(Today.getHours()), 5000);\n  }, 100);\n}); // 偵測是否有登入 \n\n;\n\n(function WhoIm() {\n  fetch(\"https://api-v2-t.hillever.com/cms/account/me\", {\n    method: \"GET\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n      'Authorization': `Bearer ${localStorage.UserTK}`\n    }\n  }).then(response => {\n    return response.json();\n  }).then(res => {\n    if (res.status === false && window.location.href === \"http://localhost:3500/menber/changePW\") {} else if (res.status === false && window.location.href === \"http://localhost:3500/menber/forgetPW\") {} else if (res.status === false && window.location.href !== \"http://localhost:3500/menber\") {\n      window.location.href = \"http://localhost:3500/menber\";\n      ImOut();\n    } else {\n      ImInside();\n    }\n  });\n})(); // 登入的取得API\n\n\nexport function LoginApi(mailVaule, passwordVaule) {\n  let userData = {\n    user_account: mailVaule,\n    user_password: passwordVaule\n  };\n  fetch(\"https://api-v2-t.hillever.com/cms2/account/login\", {\n    method: \"POST\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(userData)\n  }).then(response => {\n    return response.json();\n  }).then(res => {\n    let Today = new Date();\n\n    if (res.status === true) {\n      localStorage.setItem(\"LoginMail\", mailVaule);\n      localStorage.setItem(\"LoginUser\", \"Mingo\");\n      localStorage.setItem(\"UserTK\", res.data[\"accessToken\"], 5000);\n      localStorage.setItem(\"TKTime\", String(Today.getFullYear()) + String(Today.getMonth()) + String(Today.getDate()) + String(Today.getHours()), 5000);\n      window.location.href = \"http://localhost:3500/loginSelect\";\n    } else {\n      let AlertText = document.getElementsByClassName(\"AlertText\")[0];\n      AlertText.style.display = \"block\";\n      AlertText.innerHTML = \"密碼輸入錯誤\";\n    }\n  });\n} // 忘記密碼API\n\n_c2 = LoginApi;\nexport function ForgotApi(mailVaule) {\n  let userData = {\n    user_account: mailVaule\n  };\n  fetch(\"https://api-v2-t.hillever.com/cms/account/forgot\", {\n    method: \"POST\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(userData)\n  }).then(response => {\n    return response.json();\n  }).then(res => {\n    let AlertText = document.getElementsByClassName(\"AlertText\")[0];\n\n    if (res.status === true) {\n      AlertText.style.display = \"none\";\n      setTimeout(() => {\n        Swal.fire(\"成功發送重設密碼信箱\", \"請至您的信箱收取重設密碼信\", \"success\");\n      }, 500);\n    } else {\n      AlertText.style.display = \"block\";\n      AlertText.innerHTML = \"查無此帳號  請確認帳號\";\n    }\n  });\n} // 變更密碼API\n\n_c3 = ForgotApi;\nexport function ChangeApi() {\n  let userData = {\n    token: \"2282FFSCqWWA4iw6PMx9cR2tRKokfoxAT7fpX72yxV86SRSNMskaPTrLa0qDLbSYNr42dZX5KQ6KnasRb8Dlz1pzFeptWkGIsHiD\",\n    user_account: \"mingo.tsai@hillcorp.com\",\n    user_password: \"123123\",\n    repeat_password: \"123123\"\n  };\n  fetch(\"https://api-v2-t.hillever.com/cms/account/reset-password\", {\n    method: \"POST\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(userData)\n  }).then(response => {\n    return response.json();\n  }).then(res => {// console.log(res)\n    // let AlertText = document.getElementsByClassName(\"AlertText\")[0];\n    // if (res.status == true) {\n    //   AlertText.style.display = \"none\";\n    //   setTimeout(() => {\n    //     Swal.fire(\n    //       \"重設密碼成功\",\n    //       \"請至登入頁重新登入帳號!\",\n    //       \"success\"\n    //     );\n    //   }, 500);\n    // }\n    // else {\n    //   AlertText.style.display = \"block\";\n    //   AlertText.innerHTML = \"查無此帳號  請確認帳號\";\n    // }\n  });\n}\n_c4 = ChangeApi;\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"NoMouseMove\");\n$RefreshReg$(_c2, \"LoginApi\");\n$RefreshReg$(_c3, \"ForgotApi\");\n$RefreshReg$(_c4, \"ChangeApi\");","map":{"version":3,"sources":["D:/cms-v2/src/pages/Menber/getApi.js"],"names":["Swal","ImInside","ImOut","RemoveUser","RemoveLabel","OneDayOut","Today","Date","TodayValue","parseInt","String","getFullYear","getMonth","getDate","getHours","OnceUponATime","localStorage","TKTime","NoMouseMove","StayHere","setTimeout","window","addEventListener","event","setItem","pageX","pageY","WhoIm","fetch","method","headers","Accept","UserTK","then","response","json","res","status","location","href","LoginApi","mailVaule","passwordVaule","userData","user_account","user_password","body","JSON","stringify","data","AlertText","document","getElementsByClassName","style","display","innerHTML","ForgotApi","fire","ChangeApi","token","repeat_password"],"mappings":"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","sourcesContent":["import Swal from \"sweetalert2\";\r\nimport { ImInside, ImOut } from \"./LoginEffect\"\r\nimport { RemoveUser, RemoveLabel } from \"../../components/ReactElement/RemoveLocalStorage\"\r\n\r\n// ======================超過24小時則刪除==========================\r\n(function OneDayOut() {\r\n  let Today = new Date();\r\n  let TodayValue = parseInt(String(Today.getFullYear()) + String(Today.getMonth()) + String(Today.getDate()) + String(Today.getHours()));\r\n  let OnceUponATime = parseInt(localStorage.TKTime);\r\n  if ((TodayValue - OnceUponATime) >= 100) {\r\n    RemoveUser();\r\n    RemoveLabel();\r\n  }\r\n})();\r\n\r\n// ==================超過30分鐘滑鼠沒動就要刪除Token==================\r\nfunction NoMouseMove() {\r\n  if (localStorage.StayHere === localStorage.StayHere) {\r\n    RemoveUser();\r\n    RemoveLabel();\r\n  }\r\n  setTimeout(NoMouseMove, 1800000);\r\n}\r\nsetTimeout(NoMouseMove, 1800000);\r\n\r\n// 滑鼠移動記錄\r\nwindow.addEventListener('mousemove', (event) => {\r\n  let Today = new Date();\r\n  setTimeout(() => {\r\n    localStorage.setItem(\"StayHere\", `${event.pageX},${event.pageY}`);\r\n    localStorage.setItem(\"TKTime\", String(Today.getFullYear()) + String(Today.getMonth()) + String(Today.getDate()) + String(Today.getHours()), 5000);\r\n  }, 100)\r\n});\r\n\r\n// 偵測是否有登入 \r\n; (function WhoIm() {\r\n  fetch(\"https://api-v2-t.hillever.com/cms/account/me\", {\r\n    method: \"GET\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n      'Authorization': `Bearer ${localStorage.UserTK}`\r\n    }\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .then((res) => {\r\n      if (res.status === false && window.location.href === \"http://localhost:3500/menber/changePW\") {\r\n\r\n      }\r\n      else if (res.status === false && window.location.href === \"http://localhost:3500/menber/forgetPW\") {\r\n\r\n      }\r\n      else if (res.status === false && window.location.href !== \"http://localhost:3500/menber\") {\r\n        window.location.href = \"http://localhost:3500/menber\";\r\n        ImOut();\r\n      }\r\n      else {\r\n        ImInside();\r\n      }\r\n    });\r\n})();\r\n\r\n// 登入的取得API\r\nexport function LoginApi(mailVaule, passwordVaule) {\r\n  let userData = {\r\n    user_account: mailVaule,\r\n    user_password: passwordVaule,\r\n  };\r\n  fetch(\"https://api-v2-t.hillever.com/cms2/account/login\", {\r\n    method: \"POST\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(userData),\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .then((res) => {\r\n      let Today = new Date();\r\n      if (res.status === true) {\r\n        localStorage.setItem(\"LoginMail\", mailVaule);\r\n        localStorage.setItem(\"LoginUser\", \"Mingo\");\r\n        localStorage.setItem(\"UserTK\", res.data[\"accessToken\"], 5000);\r\n        localStorage.setItem(\"TKTime\", String(Today.getFullYear()) + String(Today.getMonth()) + String(Today.getDate()) + String(Today.getHours()), 5000);\r\n        window.location.href = \"http://localhost:3500/loginSelect\";\r\n      } else {\r\n        let AlertText = document.getElementsByClassName(\"AlertText\")[0];\r\n        AlertText.style.display = \"block\";\r\n        AlertText.innerHTML = \"密碼輸入錯誤\";\r\n      }\r\n    });\r\n}\r\n\r\n// 忘記密碼API\r\nexport function ForgotApi(mailVaule) {\r\n  let userData = {\r\n    user_account: mailVaule,\r\n  };\r\n  fetch(\"https://api-v2-t.hillever.com/cms/account/forgot\", {\r\n    method: \"POST\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(userData),\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .then((res) => {\r\n      let AlertText = document.getElementsByClassName(\"AlertText\")[0];\r\n      if (res.status === true) {\r\n        AlertText.style.display = \"none\";\r\n        setTimeout(() => {\r\n          Swal.fire(\r\n            \"成功發送重設密碼信箱\",\r\n            \"請至您的信箱收取重設密碼信\",\r\n            \"success\"\r\n          );\r\n        }, 500);\r\n      } else {\r\n        AlertText.style.display = \"block\";\r\n        AlertText.innerHTML = \"查無此帳號  請確認帳號\";\r\n      }\r\n    });\r\n}\r\n\r\n// 變更密碼API\r\nexport function ChangeApi() {\r\n  let userData = {\r\n    token: \"2282FFSCqWWA4iw6PMx9cR2tRKokfoxAT7fpX72yxV86SRSNMskaPTrLa0qDLbSYNr42dZX5KQ6KnasRb8Dlz1pzFeptWkGIsHiD\",\r\n    user_account: \"mingo.tsai@hillcorp.com\",\r\n    user_password: \"123123\",\r\n    repeat_password: \"123123\",\r\n  };\r\n  fetch(\"https://api-v2-t.hillever.com/cms/account/reset-password\", {\r\n    method: \"POST\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(userData),\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .then((res) => {\r\n      // console.log(res)\r\n      // let AlertText = document.getElementsByClassName(\"AlertText\")[0];\r\n      // if (res.status == true) {\r\n      //   AlertText.style.display = \"none\";\r\n      //   setTimeout(() => {\r\n      //     Swal.fire(\r\n      //       \"重設密碼成功\",\r\n      //       \"請至登入頁重新登入帳號!\",\r\n      //       \"success\"\r\n      //     );\r\n      //   }, 500);\r\n      // }\r\n      // else {\r\n      //   AlertText.style.display = \"block\";\r\n      //   AlertText.innerHTML = \"查無此帳號  請確認帳號\";\r\n      // }\r\n    });\r\n}"]},"metadata":{},"sourceType":"module"}