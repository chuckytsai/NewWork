{"ast":null,"code":"var _jsxFileName = \"D:\\\\cms-v2\\\\src\\\\pages\\\\cms\\\\Store\\\\StoreCreat.js\",\n    _s = $RefreshSig$();\n\n/* eslint-disable no-useless-escape */\nimport React, { useState, useEffect, useRef } from \"react\"; //引入左邊欄位\n\nimport StoreList from \"../../../components/Store/StoreList\"; //引入step bar\n\nimport StoreCreatProgressBar from \"../../../components/Store/StoreCreatProgressBar\"; //引入背景圖\n\nimport background from \"../../../images/images/background/Nodata.png\"; //引入建立公司資料STEP\n\nimport StoreCompanyInfo from \"../../../components/Store/StoreCompanyInfo\"; //引入建立店家資料STEP\n\nimport StoreData from \"../../../components/Store/StoreData\";\nimport StoreUserDataInfo from \"../../../components/Store/StoreUserDataInfo\";\nimport { storesCreatApi, companyCreatApi, imgUploadApi } from \"../../../middleware/api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction StoreCreat() {\n  _s();\n\n  const ContactLogoRef = useRef(); //店家資料\n  // const [roomProperty, setRoomProperty] = useState([\n  //   { id: \"1\", name: \"日式\", state: \"1\" },\n  //   { id: \"2\", name: \"韓式\", state: \"1\" },\n  //   { id: \"3\", name: \"燒烤\", state: \"1\" },\n  //   { id: \"4\", name: \"火鍋\", state: \"1\" },\n  //   { id: \"5\", name: \"美式\", state: \"1\" },\n  // ]);\n  //建立空的清單...從localstorage去取得 並儲存到roomProperty\n\n  const [roomProperty, setRoomProperty] = useState([]);\n\n  const getLocalStorageData = () => {\n    let local = JSON.parse(localStorage.getItem(\"roomProperty\"));\n    setRoomProperty(local);\n  };\n\n  useEffect(() => {\n    getLocalStorageData();\n  }, []); //可用商家權限\n  // const [storeUeserStoreData, setStoreUeserStoreData] = useState([\n  //   \"新店店\",\n  //   \"景美店\",\n  // ]);\n\n  const [storeUeserStoreData] = useState([\"新店店\", \"景美店\"]);\n  const [userData, setUserData] = useState(\"1\"); //建立公司資料\n\n  const [companyData, setCompanyData] = useState({\n    storeCompanyName: \"\",\n    storeUNumbers: \"\",\n    storePrincipalName: \"\",\n    storeCompanyContactName: \"\",\n    storeCompanyContactCell: \"\",\n    storeCompanyContactEmail: \"\",\n    storeCompanyContactLogo: \"\",\n    storeFoodNumber: \"\",\n    storePrincipalNniform: \"\",\n    //建立店家資料\n    storeState: false,\n    storeStoreHeading: \"\",\n    storeStoreNumbers: \"\",\n    storeStoreUNumbers: \"\",\n    storeStoreText: \"\",\n    storeStoreAttr: true,\n    storeStoreOwnerLogo: \"\",\n    storeStoreMachineLogo: \"\",\n    storeStoreAppLogo: \"\",\n    storeStoreName: \"\",\n    storeStoreCell: \"\",\n    storeStoreEmail: \"\",\n    //建立使用者資料\n    storeUeserAccount: \"\",\n    storeUeserName: \"\",\n    storeUeserAuthority: \"\",\n    storeUeserStore: \"\"\n  }); //建立公司資料錯誤訊息\n\n  const [companyDataError, setCompanyDataError] = useState({\n    storeCompanyName: \"\",\n    storeUNumbers: \"\",\n    storePrincipalName: \"\",\n    storeCompanyContactName: \"\",\n    storeCompanyContactCell: \"\",\n    storeCompanyContactEmail: \"\",\n    storeCompanyContactLogo: \"\",\n    storeFoodNumber: \"\",\n    storePrincipalNniform: \"\"\n  }); //建立公司資料func\n\n  const handelChange = e => {\n    const name = e.target.name;\n    const value = e.target.value;\n    const type = e.target.type;\n    let newValue = value;\n\n    if (type === \"checkbox\") {\n      console.log(\"dataname\", companyData[name]);\n      newValue = companyData[name].includes(value) ? companyData[name].filter((v, i) => {\n        return v !== value;\n      }) : [...companyData[name], value];\n    }\n\n    const updateFields = { ...companyData,\n      [name]: newValue\n    };\n    setCompanyData(updateFields); // 該欄位錯誤訊息清空\n\n    const updataCompanyDataError = { ...companyDataError\n    };\n    setCompanyDataError(updataCompanyDataError);\n  }; //form 有更動會觸發這個韓式\n\n\n  const handelError = e => {\n    //該欄位錯誤訊息清空\n    const updatedFieldErrors = { ...companyDataError,\n      [e.target.name]: \"\"\n    };\n    setCompanyDataError(updatedFieldErrors);\n  }; //送出時判斷有無錯誤\n\n\n  const handleToStroeInfo = () => {\n    if (companyData.storeCompanyName !== \"\" && companyData.storeUNumbers !== \"\" && companyData.storePrincipalName !== \"\" && companyData.storeCompanyContactName !== \"\" && companyData.storeCompanyContactCell !== \"\" && companyData.storeCompanyContactEmail !== \"\" && companyData.storeFoodNumber !== \"\" && companyData.storePrincipalName !== \"\" && ContactLogoRef.current.files.length !== 0) {\n      // const storeCreat = () => {\n      //   if (localStorage.getItem(\"store\") !== \"store\") {\n      //     localStorage.setItem(\"store\", JSON.stringify(companyData));\n      //   }\n      // };\n      // storeCreat();\n      // postStoreCreatAPI();\n      setUserData(\"2\");\n    } else {\n      const newCompanyData = {};\n\n      if (companyData.storeCompanyName === \"\") {\n        newCompanyData.storeCompanyName = \"請輸入公司名稱\";\n      }\n\n      if (companyData.storeUNumbers === \"\") {\n        newCompanyData.storeUNumbers = \"請輸入統一編號\";\n      }\n\n      if (companyData.storeUNumbers.length >= 1 && companyData.storeUNumbers.length < 8) {\n        newCompanyData.storeUNumbers = \"請輸入正確統一編號\";\n      }\n\n      if (companyData.storePrincipalName === \"\") {\n        newCompanyData.storePrincipalName = \"請輸入負責人姓名\";\n      }\n\n      if (companyData.storeCompanyContactName === \"\") {\n        newCompanyData.storeCompanyContactName = \"請輸入聯絡人姓名\";\n      }\n\n      if (!/[A-Z]\\-\\d{9}\\-\\d{5}\\-\\d{1}/.test(companyData.storeFoodNumber)) {\n        newCompanyData.storeFoodNumber = \"請輸入正確食品業者登錄字號\";\n      }\n\n      if (!/[A-Z]\\d{9}/.test(companyData.storePrincipalNniform)) {\n        newCompanyData.storePrincipalNniform = \"請輸入正確的身分證字號\";\n      }\n\n      if ( // eslint-disable-next-line no-useless-escape\n      !/09\\d{2}\\-?\\d{3}\\-?\\d{3}/.test(companyData.storeCompanyContactCell)) {\n        newCompanyData.storeCompanyContactCell = \"請輸入聯絡人電話/正確格式\";\n      }\n\n      if (companyData.storeCompanyContactEmail === \"\") {\n        newCompanyData.storeCompanyContactEmail = \"請輸入聯絡人信箱\";\n      }\n\n      if (companyData.storeCompanyContactEmail !== \"\" && !/.+@/.test(companyData.storeCompanyContactEmail)) {\n        newCompanyData.storeCompanyContactEmail = \"請輸入正確信箱格式\";\n      }\n\n      if (ContactLogoRef.current.files.length === 0) {\n        newCompanyData.storeCompanyContactLogo = \"請上傳公司商標\";\n      }\n\n      setCompanyDataError(newCompanyData);\n    }\n  }; //下面都是新增input 複數表單\n  // Single event handler with switch for different events\n\n\n  const [contactCount, setContactCount] = useState(0);\n  const [contactInfo, setContactInfo] = useState({}); // const [attrList, setAttrList] = useState([]);\n\n  const handleInput = e => {\n    let eventClass = e.target.className;\n\n    switch (eventClass) {\n      case \"storeCreatButtons\":\n        setContactCount(contactCount + 1);\n        break;\n\n      default:\n        // console.log(e.currentTarget);\n        let name = e.target.name;\n        let id = e.currentTarget.dataset.order;\n        let type = e.target.type;\n        let value = contactInfo[id] ? { ...contactInfo[id],\n          [name]: e.target.value\n        } : {\n          [name]: e.target.value\n        };\n\n        if (type === \"checkbox\") {\n          if (eventClass === \"switchOnOff\") {\n            let newChecked = e.target.checked;\n            let newContactCheck = { ...contactInfo,\n              [id]: { ...contactInfo[id],\n                [name]: newChecked\n              }\n            };\n            console.log(\"開關\", newChecked, newContactCheck);\n            setContactInfo(newContactCheck);\n          } else {\n            var _contactInfo$id;\n\n            let newValue = e.target.value;\n            let oldAttrList = (contactInfo === null || contactInfo === void 0 ? void 0 : (_contactInfo$id = contactInfo[id]) === null || _contactInfo$id === void 0 ? void 0 : _contactInfo$id[name]) || [];\n            let newList = [];\n\n            if (oldAttrList === null || oldAttrList === void 0 ? void 0 : oldAttrList.includes(newValue)) {\n              newList = oldAttrList.filter(v => v !== newValue);\n              console.log(newList);\n            } else {\n              newList = [...oldAttrList, newValue];\n            }\n\n            let newContactInfo = { ...contactInfo,\n              [id]: { ...contactInfo[id],\n                [name]: newList\n              }\n            };\n            setContactInfo(newContactInfo);\n          }\n        } else if (type === \"file\") {\n          if (e.target.files[0] === undefined) {\n            console.log(e.target.files[0], [id], [name]);\n            let newContactInfo = { ...contactInfo,\n              [id]: { ...contactInfo[id],\n                [name]: \"\"\n              }\n            };\n            console.log(newContactInfo);\n            setContactInfo(newContactInfo);\n          } else {\n            Array.from(e.target.files).forEach(i => {\n              let formData = new FormData();\n              formData.append(\"file\", e.target.files[0]);\n              formData.append(\"folder\", \"item\");\n              imgUploadApi(formData).then(res => {\n                let newContactInfo = { ...contactInfo,\n                  [id]: { ...contactInfo[id],\n                    [name]: res.data.data.file_url ? res.data.data.file_url : \"\"\n                  }\n                };\n                console.log(newContactInfo);\n                setContactInfo(newContactInfo);\n              });\n            });\n          }\n        } else {\n          let newContactInfo = { ...contactInfo,\n            [id]: value\n          };\n          console.log(newContactInfo);\n          setContactInfo(newContactInfo);\n        }\n\n        break;\n    }\n  };\n\n  function creatNewInfo() {\n    let contactInputElements = [];\n\n    for (let i = 0; i <= contactCount; i++) {\n      contactInputElements.push( /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(StoreData, {\n          id: \"contact_\" + i,\n          storeError: storeError,\n          userDataFromSend: userDataFromSend,\n          roomProperty: roomProperty,\n          setRoomProperty: setRoomProperty,\n          companyDataError: companyDataError,\n          handelChange: handelChange,\n          handleInput: handleInput,\n          background: background,\n          companyData: companyData,\n          setCompanyData: setCompanyData,\n          setContactInfo: setContactInfo,\n          contactInfo: contactInfo,\n          contactCount: contactCount\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 11\n        }, this)\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 9\n      }, this));\n    }\n\n    return contactInputElements;\n  } //這邊判斷店家資料是否為空\n\n\n  const [storeError, setStoreError] = useState({});\n\n  const userDataFromSend = e => {\n    const NewObj = Object.values(contactInfo);\n\n    if (NewObj.length === 0) {\n      setStoreError({\n        storeStoreHeading: \"請填入店家名稱\",\n        storeStoreText: \"請填入店家簡述\"\n      });\n      console.log(storeError);\n      return;\n    }\n\n    for (let i = 0; i < NewObj.length; i++) {\n      let newErrorMessage = {};\n\n      if (NewObj[i].storeStoreHeading === undefined || NewObj[i].storeStoreHeading === \"\") {\n        newErrorMessage.storeStoreHeading = \"請填入店家名稱\";\n      }\n\n      if (NewObj[i].storeStoreText === undefined || NewObj[i].storeStoreText === \"\") {\n        newErrorMessage.storeStoreText = \"請填入店家簡述\";\n      } // let asss = { ...storeError, newErrorMessage };\n\n\n      setStoreError(newErrorMessage);\n      console.log(newErrorMessage);\n    }\n\n    postStoreCreatAPI();\n    setUserData(\"3\");\n    /*if (contactInfo.contact_0 === undefined) {\r\n      console.log(\"條件成功\");\r\n    } else {\r\n      console.log(contactInfo.contact_0);\r\n      console.log(\"條件失敗\");\r\n      console.log(contactInfo);\r\n        // postStoreCreatAPI(); //回傳API\r\n      //切換分頁\r\n    }*/\n  }; //全部填寫完畢以後新增資料API 可做負數表單處理\n\n\n  const postStoreCreatAPI = () => {\n    companyCreatApi({\n      name: companyData.storeCompanyName,\n      uniform: companyData.storeUNumbers,\n      owner_name: companyData.storePrincipalName,\n      contact_name: companyData.storeCompanyContactName,\n      contact_tel: companyData.storeCompanyContactCell,\n      contact_email: companyData.storeCompanyContactEmail,\n      picture: companyData.storeCompanyContactLogo\n    });\n    const NewObj = Object.values(contactInfo);\n\n    for (let i = 0; i < NewObj.length; i++) {\n      console.log(\"say\", NewObj[i].storeStoreHeading);\n      storesCreatApi({\n        status: NewObj[i].state || false,\n        name: NewObj[i].storeStoreHeading,\n        store_code: NewObj[i].storeStoreNumbers,\n        uniform: NewObj[i].storeStoreUNumbers,\n        brief: NewObj[i].storeStoreText,\n        picture: NewObj[i].storeStoreOwnerLogo,\n        picture_machine_logo: NewObj[i].storeStoreMachineLogo,\n        picture_app_logo: NewObj[i].storeStoreAppLogo,\n        attributes: NewObj[i].storeStoreAttr,\n        config: {\n          is_invoice: true,\n          emails: [],\n          phones: []\n        },\n        contact_name: NewObj[i].storeStoreName,\n        contact_tel: NewObj[i].storeStoreCell,\n        contact_email: NewObj[i].storeStoreEmail\n      }).then(res => {\n        console.log(res);\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n  };\n  /**可做單筆新增\r\n  *  storesCreatApi({\r\n      \r\n    status: true,\r\n    name: contactInfo.contact_0.storeStoreHeading,\r\n    store_code: contactInfo.contact_0.storeStoreNumbers,\r\n    uniform: contactInfo.contact_0.storeStoreUNumbers,\r\n    brief: contactInfo.contact_0.storeStoreText,\r\n    picture: contactInfo.contact_0.storeStoreOwnerLogo,\r\n    picture_machine_logo: contactInfo.contact_0.storeStoreMachineLogo,\r\n    picture_app_logo: contactInfo.contact_0.storeStoreAppLogo,\r\n    attributes: contactInfo.contact_0.storeStoreAttr,\r\n    config: {\r\n      is_invoice: true,\r\n      emails: [],\r\n      phones: [],\r\n    },\r\n    contact_name: contactInfo.contact_0.storeStoreName,\r\n    contact_tel: contactInfo.contact_0.storeStoreCell,\r\n    contact_email: contactInfo.contact_0.storeStoreEmail,\r\n  })\r\n    .then((res) => {\r\n      console.log(res);\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n  };\r\n  */\n  //上傳圖片API\n\n\n  const postStoreIMGAPI = async e => {\n    Array.from(e.target.files).forEach(i => {\n      let formData = new FormData();\n      formData.append(\"file\", i);\n      formData.append(\"folder\", \"item\");\n      imgUploadApi(formData).then(res => {\n        console.log(res);\n        setCompanyData({ ...companyData,\n          storeCompanyContactLogo: res.data.data.file_url ? res.data.data.file_url : \"\"\n        });\n      });\n    });\n    console.log(e.target.files);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"storeContext\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"storeGroup\",\n      children: [/*#__PURE__*/_jsxDEV(StoreList, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 437,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"storeRight\",\n        children: [\" \", /*#__PURE__*/_jsxDEV(StoreCreatProgressBar, {\n          userData: userData,\n          setUserData: setUserData\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 441,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"storeContainer\",\n          children: userData === \"1\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(StoreCompanyInfo, {\n              ContactLogoRef: ContactLogoRef,\n              handelError: handelError,\n              handelChange: handelChange,\n              companyData: companyData,\n              companyDataError: companyDataError,\n              postStoreIMGAPI: postStoreIMGAPI\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 449,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"storeCreatButton\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-success\",\n                onClick: () => {\n                  handleToStroeInfo();\n                },\n                children: \"\\u78BA\\u8A8D\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 459,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 458,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 445,\n          columnNumber: 11\n        }, this), userData === \"2\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [creatNewInfo(), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"storeCreatTextBody\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"storeCreatButtons\",\n              onClick: e => handleInput(e),\n              children: [\"\\u65B0\\u589E\\u7B2C\", contactCount + 2, \"\\u7B46\\u5E97\\u5BB6\\u8CC7\\u6599\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 476,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 475,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex justify-content-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-secondary mx-2\",\n              onClick: () => {\n                setUserData(\"1\");\n              },\n              children: \"\\u4E0A\\u4E00\\u6B65\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 484,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-success text-white mx-2\",\n              onClick: e => {\n                userDataFromSend(e);\n              },\n              children: \"\\u4E0B\\u4E00\\u6B65\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 492,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 483,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true), userData === \"3\" && /*#__PURE__*/_jsxDEV(StoreUserDataInfo, {\n          storeUeserStoreData: storeUeserStoreData,\n          handelChange: handelChange,\n          companyData: companyData,\n          setUserData: setUserData\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 505,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 438,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 435,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 434,\n    columnNumber: 5\n  }, this);\n}\n\n_s(StoreCreat, \"CzFNGNjLb7Gd+Q7wVkM8kMsh62Q=\");\n\n_c = StoreCreat;\nexport default StoreCreat;\n\nvar _c;\n\n$RefreshReg$(_c, \"StoreCreat\");","map":{"version":3,"sources":["D:/cms-v2/src/pages/cms/Store/StoreCreat.js"],"names":["React","useState","useEffect","useRef","StoreList","StoreCreatProgressBar","background","StoreCompanyInfo","StoreData","StoreUserDataInfo","storesCreatApi","companyCreatApi","imgUploadApi","StoreCreat","ContactLogoRef","roomProperty","setRoomProperty","getLocalStorageData","local","JSON","parse","localStorage","getItem","storeUeserStoreData","userData","setUserData","companyData","setCompanyData","storeCompanyName","storeUNumbers","storePrincipalName","storeCompanyContactName","storeCompanyContactCell","storeCompanyContactEmail","storeCompanyContactLogo","storeFoodNumber","storePrincipalNniform","storeState","storeStoreHeading","storeStoreNumbers","storeStoreUNumbers","storeStoreText","storeStoreAttr","storeStoreOwnerLogo","storeStoreMachineLogo","storeStoreAppLogo","storeStoreName","storeStoreCell","storeStoreEmail","storeUeserAccount","storeUeserName","storeUeserAuthority","storeUeserStore","companyDataError","setCompanyDataError","handelChange","e","name","target","value","type","newValue","console","log","includes","filter","v","i","updateFields","updataCompanyDataError","handelError","updatedFieldErrors","handleToStroeInfo","current","files","length","newCompanyData","test","contactCount","setContactCount","contactInfo","setContactInfo","handleInput","eventClass","className","id","currentTarget","dataset","order","newChecked","checked","newContactCheck","oldAttrList","newList","newContactInfo","undefined","Array","from","forEach","formData","FormData","append","then","res","data","file_url","creatNewInfo","contactInputElements","push","storeError","userDataFromSend","setStoreError","NewObj","Object","values","newErrorMessage","postStoreCreatAPI","uniform","owner_name","contact_name","contact_tel","contact_email","picture","status","state","store_code","brief","picture_machine_logo","picture_app_logo","attributes","config","is_invoice","emails","phones","catch","err","postStoreIMGAPI"],"mappings":"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","sourcesContent":["/* eslint-disable no-useless-escape */\r\nimport React, { useState, useEffect, useRef } from \"react\";\r\n//引入左邊欄位\r\nimport StoreList from \"../../../components/Store/StoreList\";\r\n//引入step bar\r\nimport StoreCreatProgressBar from \"../../../components/Store/StoreCreatProgressBar\";\r\n//引入背景圖\r\nimport background from \"../../../images/images/background/Nodata.png\";\r\n//引入建立公司資料STEP\r\nimport StoreCompanyInfo from \"../../../components/Store/StoreCompanyInfo\";\r\n//引入建立店家資料STEP\r\nimport StoreData from \"../../../components/Store/StoreData\";\r\nimport StoreUserDataInfo from \"../../../components/Store/StoreUserDataInfo\";\r\nimport {\r\n  storesCreatApi,\r\n  companyCreatApi,\r\n  imgUploadApi,\r\n} from \"../../../middleware/api\";\r\nfunction StoreCreat() {\r\n  const ContactLogoRef = useRef();\r\n  //店家資料\r\n  // const [roomProperty, setRoomProperty] = useState([\r\n  //   { id: \"1\", name: \"日式\", state: \"1\" },\r\n  //   { id: \"2\", name: \"韓式\", state: \"1\" },\r\n  //   { id: \"3\", name: \"燒烤\", state: \"1\" },\r\n  //   { id: \"4\", name: \"火鍋\", state: \"1\" },\r\n  //   { id: \"5\", name: \"美式\", state: \"1\" },\r\n  // ]);\r\n  //建立空的清單...從localstorage去取得 並儲存到roomProperty\r\n  const [roomProperty, setRoomProperty] = useState([]);\r\n\r\n  const getLocalStorageData = () => {\r\n    let local = JSON.parse(localStorage.getItem(\"roomProperty\"));\r\n    setRoomProperty(local);\r\n  };\r\n  useEffect(() => {\r\n    getLocalStorageData();\r\n  }, []);\r\n  //可用商家權限\r\n  // const [storeUeserStoreData, setStoreUeserStoreData] = useState([\r\n  //   \"新店店\",\r\n  //   \"景美店\",\r\n  // ]);\r\n  const [storeUeserStoreData] = useState([\"新店店\", \"景美店\"]);\r\n  const [userData, setUserData] = useState(\"1\");\r\n  //建立公司資料\r\n  const [companyData, setCompanyData] = useState({\r\n    storeCompanyName: \"\",\r\n    storeUNumbers: \"\",\r\n    storePrincipalName: \"\",\r\n    storeCompanyContactName: \"\",\r\n    storeCompanyContactCell: \"\",\r\n    storeCompanyContactEmail: \"\",\r\n    storeCompanyContactLogo: \"\",\r\n    storeFoodNumber: \"\",\r\n    storePrincipalNniform: \"\",\r\n    //建立店家資料\r\n    storeState: false,\r\n    storeStoreHeading: \"\",\r\n    storeStoreNumbers: \"\",\r\n    storeStoreUNumbers: \"\",\r\n    storeStoreText: \"\",\r\n    storeStoreAttr: true,\r\n    storeStoreOwnerLogo: \"\",\r\n    storeStoreMachineLogo: \"\",\r\n    storeStoreAppLogo: \"\",\r\n    storeStoreName: \"\",\r\n    storeStoreCell: \"\",\r\n    storeStoreEmail: \"\",\r\n    //建立使用者資料\r\n    storeUeserAccount: \"\",\r\n    storeUeserName: \"\",\r\n    storeUeserAuthority: \"\",\r\n    storeUeserStore: \"\",\r\n  });\r\n  //建立公司資料錯誤訊息\r\n  const [companyDataError, setCompanyDataError] = useState({\r\n    storeCompanyName: \"\",\r\n    storeUNumbers: \"\",\r\n    storePrincipalName: \"\",\r\n    storeCompanyContactName: \"\",\r\n    storeCompanyContactCell: \"\",\r\n    storeCompanyContactEmail: \"\",\r\n    storeCompanyContactLogo: \"\",\r\n    storeFoodNumber: \"\",\r\n    storePrincipalNniform: \"\",\r\n  });\r\n  //建立公司資料func\r\n  const handelChange = (e) => {\r\n    const name = e.target.name;\r\n    const value = e.target.value;\r\n    const type = e.target.type;\r\n    let newValue = value;\r\n    if (type === \"checkbox\") {\r\n      console.log(\"dataname\", companyData[name]);\r\n      newValue = companyData[name].includes(value)\r\n        ? companyData[name].filter((v, i) => {\r\n            return v !== value;\r\n          })\r\n        : [...companyData[name], value];\r\n    }\r\n    const updateFields = {\r\n      ...companyData,\r\n      [name]: newValue,\r\n    };\r\n    setCompanyData(updateFields);\r\n    // 該欄位錯誤訊息清空\r\n    const updataCompanyDataError = {\r\n      ...companyDataError,\r\n    };\r\n\r\n    setCompanyDataError(updataCompanyDataError);\r\n  };\r\n  //form 有更動會觸發這個韓式\r\n  const handelError = (e) => {\r\n    //該欄位錯誤訊息清空\r\n    const updatedFieldErrors = {\r\n      ...companyDataError,\r\n      [e.target.name]: \"\",\r\n    };\r\n    setCompanyDataError(updatedFieldErrors);\r\n  };\r\n  //送出時判斷有無錯誤\r\n  const handleToStroeInfo = () => {\r\n    if (\r\n      companyData.storeCompanyName !== \"\" &&\r\n      companyData.storeUNumbers !== \"\" &&\r\n      companyData.storePrincipalName !== \"\" &&\r\n      companyData.storeCompanyContactName !== \"\" &&\r\n      companyData.storeCompanyContactCell !== \"\" &&\r\n      companyData.storeCompanyContactEmail !== \"\" &&\r\n      companyData.storeFoodNumber !== \"\" &&\r\n      companyData.storePrincipalName !== \"\" &&\r\n      ContactLogoRef.current.files.length !== 0\r\n    ) {\r\n      // const storeCreat = () => {\r\n      //   if (localStorage.getItem(\"store\") !== \"store\") {\r\n      //     localStorage.setItem(\"store\", JSON.stringify(companyData));\r\n      //   }\r\n      // };\r\n      // storeCreat();\r\n      // postStoreCreatAPI();\r\n      setUserData(\"2\");\r\n    } else {\r\n      const newCompanyData = {};\r\n      if (companyData.storeCompanyName === \"\") {\r\n        newCompanyData.storeCompanyName = \"請輸入公司名稱\";\r\n      }\r\n      if (companyData.storeUNumbers === \"\") {\r\n        newCompanyData.storeUNumbers = \"請輸入統一編號\";\r\n      }\r\n      if (\r\n        companyData.storeUNumbers.length >= 1 &&\r\n        companyData.storeUNumbers.length < 8\r\n      ) {\r\n        newCompanyData.storeUNumbers = \"請輸入正確統一編號\";\r\n      }\r\n      if (companyData.storePrincipalName === \"\") {\r\n        newCompanyData.storePrincipalName = \"請輸入負責人姓名\";\r\n      }\r\n      if (companyData.storeCompanyContactName === \"\") {\r\n        newCompanyData.storeCompanyContactName = \"請輸入聯絡人姓名\";\r\n      }\r\n      if (!/[A-Z]\\-\\d{9}\\-\\d{5}\\-\\d{1}/.test(companyData.storeFoodNumber)) {\r\n        newCompanyData.storeFoodNumber = \"請輸入正確食品業者登錄字號\";\r\n      }\r\n      if (!/[A-Z]\\d{9}/.test(companyData.storePrincipalNniform)) {\r\n        newCompanyData.storePrincipalNniform = \"請輸入正確的身分證字號\";\r\n      }\r\n      if (\r\n        // eslint-disable-next-line no-useless-escape\r\n        !/09\\d{2}\\-?\\d{3}\\-?\\d{3}/.test(companyData.storeCompanyContactCell)\r\n      ) {\r\n        newCompanyData.storeCompanyContactCell = \"請輸入聯絡人電話/正確格式\";\r\n      }\r\n      if (companyData.storeCompanyContactEmail === \"\") {\r\n        newCompanyData.storeCompanyContactEmail = \"請輸入聯絡人信箱\";\r\n      }\r\n      if (\r\n        companyData.storeCompanyContactEmail !== \"\" &&\r\n        !/.+@/.test(companyData.storeCompanyContactEmail)\r\n      ) {\r\n        newCompanyData.storeCompanyContactEmail = \"請輸入正確信箱格式\";\r\n      }\r\n      if (ContactLogoRef.current.files.length === 0) {\r\n        newCompanyData.storeCompanyContactLogo = \"請上傳公司商標\";\r\n      }\r\n      setCompanyDataError(newCompanyData);\r\n    }\r\n  };\r\n  //下面都是新增input 複數表單\r\n  // Single event handler with switch for different events\r\n  const [contactCount, setContactCount] = useState(0);\r\n  const [contactInfo, setContactInfo] = useState({});\r\n  // const [attrList, setAttrList] = useState([]);\r\n  const handleInput = (e) => {\r\n    let eventClass = e.target.className;\r\n    switch (eventClass) {\r\n      case \"storeCreatButtons\":\r\n        setContactCount(contactCount + 1);\r\n        break;\r\n      default:\r\n        // console.log(e.currentTarget);\r\n        let name = e.target.name;\r\n        let id = e.currentTarget.dataset.order;\r\n        let type = e.target.type;\r\n        let value = contactInfo[id]\r\n          ? { ...contactInfo[id], [name]: e.target.value }\r\n          : { [name]: e.target.value };\r\n        if (type === \"checkbox\") {\r\n          if (eventClass === \"switchOnOff\") {\r\n            let newChecked = e.target.checked;\r\n            let newContactCheck = {\r\n              ...contactInfo,\r\n              [id]: { ...contactInfo[id], [name]: newChecked },\r\n            };\r\n            console.log(\"開關\", newChecked, newContactCheck);\r\n            setContactInfo(newContactCheck);\r\n          } else {\r\n            let newValue = e.target.value;\r\n            let oldAttrList = contactInfo?.[id]?.[name] || [];\r\n            let newList = [];\r\n            if (oldAttrList?.includes(newValue)) {\r\n              newList = oldAttrList.filter((v) => v !== newValue);\r\n              console.log(newList);\r\n            } else {\r\n              newList = [...oldAttrList, newValue];\r\n            }\r\n            let newContactInfo = {\r\n              ...contactInfo,\r\n              [id]: { ...contactInfo[id], [name]: newList },\r\n            };\r\n            setContactInfo(newContactInfo);\r\n          }\r\n        } else if (type === \"file\") {\r\n          if (e.target.files[0] === undefined) {\r\n            console.log(e.target.files[0], [id], [name]);\r\n            let newContactInfo = {\r\n              ...contactInfo,\r\n              [id]: {\r\n                ...contactInfo[id],\r\n                [name]: \"\",\r\n              },\r\n            };\r\n            console.log(newContactInfo);\r\n            setContactInfo(newContactInfo);\r\n          } else {\r\n            Array.from(e.target.files).forEach((i) => {\r\n              let formData = new FormData();\r\n              formData.append(\"file\", e.target.files[0]);\r\n              formData.append(\"folder\", \"item\");\r\n              imgUploadApi(formData).then((res) => {\r\n                let newContactInfo = {\r\n                  ...contactInfo,\r\n                  [id]: {\r\n                    ...contactInfo[id],\r\n                    [name]: res.data.data.file_url\r\n                      ? res.data.data.file_url\r\n                      : \"\",\r\n                  },\r\n                };\r\n                console.log(newContactInfo);\r\n                setContactInfo(newContactInfo);\r\n              });\r\n            });\r\n          }\r\n        } else {\r\n          let newContactInfo = { ...contactInfo, [id]: value };\r\n          console.log(newContactInfo);\r\n          setContactInfo(newContactInfo);\r\n        }\r\n        break;\r\n    }\r\n  };\r\n\r\n  function creatNewInfo() {\r\n    let contactInputElements = [];\r\n    for (let i = 0; i <= contactCount; i++) {\r\n      contactInputElements.push(\r\n        <div key={i}>\r\n          <StoreData\r\n            id={\"contact_\" + i}\r\n            storeError={storeError}\r\n            userDataFromSend={userDataFromSend}\r\n            roomProperty={roomProperty}\r\n            setRoomProperty={setRoomProperty}\r\n            companyDataError={companyDataError}\r\n            handelChange={handelChange}\r\n            handleInput={handleInput}\r\n            background={background}\r\n            companyData={companyData}\r\n            setCompanyData={setCompanyData}\r\n            setContactInfo={setContactInfo}\r\n            contactInfo={contactInfo}\r\n            contactCount={contactCount}\r\n          />\r\n        </div>\r\n      );\r\n    }\r\n    return contactInputElements;\r\n  }\r\n  //這邊判斷店家資料是否為空\r\n  const [storeError, setStoreError] = useState({});\r\n  const userDataFromSend = (e) => {\r\n    const NewObj = Object.values(contactInfo);\r\n    if (NewObj.length === 0) {\r\n      setStoreError({\r\n        storeStoreHeading: \"請填入店家名稱\",\r\n        storeStoreText: \"請填入店家簡述\",\r\n      });\r\n      console.log(storeError);\r\n      return;\r\n    }\r\n    for (let i = 0; i < NewObj.length; i++) {\r\n      let newErrorMessage = {};\r\n      if (\r\n        NewObj[i].storeStoreHeading === undefined ||\r\n        NewObj[i].storeStoreHeading === \"\"\r\n      ) {\r\n        newErrorMessage.storeStoreHeading = \"請填入店家名稱\";\r\n      }\r\n      if (\r\n        NewObj[i].storeStoreText === undefined ||\r\n        NewObj[i].storeStoreText === \"\"\r\n      ) {\r\n        newErrorMessage.storeStoreText = \"請填入店家簡述\";\r\n      }\r\n      // let asss = { ...storeError, newErrorMessage };\r\n      setStoreError(newErrorMessage);\r\n      console.log(newErrorMessage);\r\n    }\r\n    postStoreCreatAPI();\r\n    setUserData(\"3\");\r\n    /*if (contactInfo.contact_0 === undefined) {\r\n      console.log(\"條件成功\");\r\n    } else {\r\n      console.log(contactInfo.contact_0);\r\n      console.log(\"條件失敗\");\r\n      console.log(contactInfo);\r\n\r\n      // postStoreCreatAPI(); //回傳API\r\n      //切換分頁\r\n    }*/\r\n  };\r\n  //全部填寫完畢以後新增資料API 可做負數表單處理\r\n  const postStoreCreatAPI = () => {\r\n    companyCreatApi({\r\n      name: companyData.storeCompanyName,\r\n      uniform: companyData.storeUNumbers,\r\n      owner_name: companyData.storePrincipalName,\r\n      contact_name: companyData.storeCompanyContactName,\r\n      contact_tel: companyData.storeCompanyContactCell,\r\n      contact_email: companyData.storeCompanyContactEmail,\r\n      picture: companyData.storeCompanyContactLogo,\r\n    });\r\n    const NewObj = Object.values(contactInfo);\r\n    for (let i = 0; i < NewObj.length; i++) {\r\n      console.log(\"say\", NewObj[i].storeStoreHeading);\r\n      storesCreatApi({\r\n        status: NewObj[i].state || false,\r\n        name: NewObj[i].storeStoreHeading,\r\n        store_code: NewObj[i].storeStoreNumbers,\r\n        uniform: NewObj[i].storeStoreUNumbers,\r\n        brief: NewObj[i].storeStoreText,\r\n        picture: NewObj[i].storeStoreOwnerLogo,\r\n        picture_machine_logo: NewObj[i].storeStoreMachineLogo,\r\n        picture_app_logo: NewObj[i].storeStoreAppLogo,\r\n        attributes: NewObj[i].storeStoreAttr,\r\n        config: {\r\n          is_invoice: true,\r\n          emails: [],\r\n          phones: [],\r\n        },\r\n        contact_name: NewObj[i].storeStoreName,\r\n        contact_tel: NewObj[i].storeStoreCell,\r\n        contact_email: NewObj[i].storeStoreEmail,\r\n      })\r\n        .then((res) => {\r\n          console.log(res);\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n    }\r\n  };\r\n  /**可做單筆新增\r\n *  storesCreatApi({\r\n      \r\n    status: true,\r\n    name: contactInfo.contact_0.storeStoreHeading,\r\n    store_code: contactInfo.contact_0.storeStoreNumbers,\r\n    uniform: contactInfo.contact_0.storeStoreUNumbers,\r\n    brief: contactInfo.contact_0.storeStoreText,\r\n    picture: contactInfo.contact_0.storeStoreOwnerLogo,\r\n    picture_machine_logo: contactInfo.contact_0.storeStoreMachineLogo,\r\n    picture_app_logo: contactInfo.contact_0.storeStoreAppLogo,\r\n    attributes: contactInfo.contact_0.storeStoreAttr,\r\n    config: {\r\n      is_invoice: true,\r\n      emails: [],\r\n      phones: [],\r\n    },\r\n    contact_name: contactInfo.contact_0.storeStoreName,\r\n    contact_tel: contactInfo.contact_0.storeStoreCell,\r\n    contact_email: contactInfo.contact_0.storeStoreEmail,\r\n  })\r\n    .then((res) => {\r\n      console.log(res);\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n};\r\n*/\r\n  //上傳圖片API\r\n  const postStoreIMGAPI = async (e) => {\r\n    Array.from(e.target.files).forEach((i) => {\r\n      let formData = new FormData();\r\n      formData.append(\"file\", i);\r\n      formData.append(\"folder\", \"item\");\r\n      imgUploadApi(formData).then((res) => {\r\n        console.log(res);\r\n        setCompanyData({\r\n          ...companyData,\r\n          storeCompanyContactLogo: res.data.data.file_url\r\n            ? res.data.data.file_url\r\n            : \"\",\r\n        });\r\n      });\r\n    });\r\n    console.log(e.target.files);\r\n  };\r\n  return (\r\n    <div className=\"storeContext\">\r\n      <div className=\"storeGroup\">\r\n        {/* 右側店家列表 */}\r\n        <StoreList />\r\n        <div className=\"storeRight\">\r\n          {\" \"}\r\n          {/* 上方進度條 */}\r\n          <StoreCreatProgressBar\r\n            userData={userData}\r\n            setUserData={setUserData}\r\n          />\r\n          <div className=\"storeContainer\">\r\n            {/* 新增公司資料頁面 */}\r\n            {userData === \"1\" && (\r\n              <>\r\n                <StoreCompanyInfo\r\n                  ContactLogoRef={ContactLogoRef}\r\n                  handelError={handelError}\r\n                  handelChange={handelChange}\r\n                  companyData={companyData}\r\n                  companyDataError={companyDataError}\r\n                  postStoreIMGAPI={postStoreIMGAPI}\r\n                />\r\n\r\n                <div className=\"storeCreatButton\">\r\n                  <button\r\n                    className=\"btn btn-success\"\r\n                    onClick={() => {\r\n                      handleToStroeInfo();\r\n                    }}\r\n                  >\r\n                    確認\r\n                  </button>\r\n                </div>\r\n              </>\r\n            )}\r\n          </div>\r\n          {/* 新增店家頁面 */}\r\n          {userData === \"2\" && (\r\n            <>\r\n              {creatNewInfo()}\r\n              <div className=\"storeCreatTextBody\">\r\n                <button\r\n                  className=\"storeCreatButtons\"\r\n                  onClick={(e) => handleInput(e)}\r\n                >\r\n                  新增第{contactCount + 2}筆店家資料\r\n                </button>\r\n              </div>\r\n              <div className=\"d-flex justify-content-center\">\r\n                <button\r\n                  className=\"btn btn-secondary mx-2\"\r\n                  onClick={() => {\r\n                    setUserData(\"1\");\r\n                  }}\r\n                >\r\n                  上一步\r\n                </button>\r\n                <button\r\n                  className=\"btn btn-success text-white mx-2\"\r\n                  onClick={(e) => {\r\n                    userDataFromSend(e);\r\n                  }}\r\n                >\r\n                  下一步\r\n                </button>\r\n              </div>\r\n            </>\r\n          )}\r\n          {/* 新增使用者資料頁面 */}\r\n          {userData === \"3\" && (\r\n            <StoreUserDataInfo\r\n              storeUeserStoreData={storeUeserStoreData}\r\n              handelChange={handelChange}\r\n              companyData={companyData}\r\n              setUserData={setUserData}\r\n            />\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default StoreCreat;\r\n"]},"metadata":{},"sourceType":"module"}